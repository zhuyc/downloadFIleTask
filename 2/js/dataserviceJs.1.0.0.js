define("dataserviceJs",function(i,t,e){function n(i){return"[object Object]"=={}.toString.call(i)}function o(i){if(!n(i))return!0;for(var t in i)if({}.hasOwnProperty.call(i,t))return!1;return!0}function a(i,t){return this instanceof a?(this.elem=$(i),void this.init(t)):new a(i,t)}function l(){var i=this;$(i.scrollElem).on("scroll",function(t){var e=$(this),n=i.isWindowScroll?$(document):$(i.contentElem);!i.stopped&&!i.isLoading&&!i.isLoaded&&e.scrollTop()+i.bottom>=n.height()-e.height()-1&&(c.call(i),i.loadData())})}function r(){this.elem.append('<div class="data-loader">'+this.clickMsg+"</div>");var i=this;$(".data-loader",i.elem).on("click",function(){i.isLoading||i.isLoaded||(c.call(i),i.loadData())})}function c(){var i=$(".data-loader",this.elem),t="<span>"+this.loadingMsg+"</span>";i.length?i.html(t):(this.elem.append('<div class="data-loader">'+t+"</div>"),i=$(".data-loader",this.elem)),$(window).scrollTop($(window).scrollTop()+i.height())}a.prototype={constructor:a,init:function(i){this.check(i.config),$.extend(this,{initLoad:!1,method:"scroll",scrollElem:$(window),bottom:0,initMsg:"上拉加载更多数据",loadingMsg:"正在加载中",finishMsg:"没有更多内容了哦",clickMsg:"点击加载更多数据",errorMsg:"出错了，请重试"},i),this.isWindowScroll=this.scrollElem[0]===window,this.initLoad&&this.loadData(),this.bindEvents()},bindEvents:function(){"scroll"===this.method?l.call(this):"click"===this.method&&r.call(this)},check:function(i){if(!n(i))throw new Error("the config must be an object！");if(o(i))throw new Error("the config cant be an empty object！");if(!i.name)throw new Error("the serviceName is required！");if(!i.url)throw new Error("the url is required！");if(!i.interfaceid)throw new Error("the interfaceid is required！")},loadData:function(){var i=this;i.isLoading=!0,window._tc_bridge_util.get_data({param:{tagname:i.config.tag||"",servicename:i.config.name,interfaceid:i.config.interfaceid,requrl:i.config.url,reqbody:i.data||"",iscache:i.config.cache||0},callback:function(t){i.isLoading=!1;var e,n=$(".data-loader",i.elem);if((!i.config.callback||(e=i.config.callback(t,i)))&&(i.contentElem?$(i.contentElem,i.elem).append(e||t):n.length?n.before(e||t):i.elem.append(e||t)),i.isLoaded)n.length?n.html(i.finishMsg):i.initLoad&&i.elem.append('<div class="data-loader">'+i.finishMsg+"</div>");else{if(!n.length)return;"scroll"===i.method?n.html(i.initMsg):"click"===i.method&&n.html(i.clickMsg)}}})},stop:function(){this.stopped=!0},start:function(){this.stopped=!1}},$.fn.dataService=function(i){for(var t=[],e=0,n=this.length;n>e;e++)t.push(new a(this[e],i));return 1===t.length?t[0]:t.length>1?t:void 0}});