define("imgpreviewJs",function(t,a,e){function i(){v=d.offset(),k=v.width,u=v.height,clearTimeout(g),g=setTimeout(function(){var t=$("ul",d),a=parseInt(t.data("active"),10);r.call(t,a)},200)}function s(t){var a=$("img",t),e=[a];e.push($("img",t.prev("li"))),e.push($("img",t.next("li"))),e.forEach(function(t){t[0]&&(t[0].src=t.data("src"))})}function n(t,a){a=a&&a>=1?a:1;for(var e=-(a-1)*k,i="<span><i>"+a+"</i>/"+t.length+'</span><ul style="transform: translate3d('+e+'px, 0px, 0px);" data-move-len="'+e+'" data-active="'+a+'"  data-last-active="'+a+'" data-lengths="'+t.length+'">',n=0;n<t.length;n++){var r=t[n],l=r.url||r,c=r.title;i+='<li class="list-loading"><span data-skewingx="0" data-skewingy="0"><img style="height:'+360/(640/k)+'px;" data-scale="1" data-src="'+l+'" title="'+c+'"/></span></li>'}i+='</ul><div class="view-title"><p>'+(t[a-1].title||"")+"</p></div>",i=$(i);var h=$("li",i).off("touchstart touchmove touchend touchcancel",f);$("ul",d).off("touchstart touchmove touchend touchcancel",o),x.webp&&b.loadWebp&&b.loadWebp({attr:"data-src",img:$("img",h)}),d.html(i),$("img",i).on("load",function(){this.style.height="auto",$(this).parents("li").removeClass("list-loading")}),s(h.eq(a-1)),$("li",i).on("touchstart touchmove touchend touchcancel",f),$("ul",d).on("touchstart touchmove touchend touchcancel",o)}function o(t){t.preventDefault(),t.stopPropagation();var a=$(this);switch(t.type){case"touchstart":if(t.touches.length>1)return;P.startTime=(new Date).getTime();var e=t.touches[0];P.startX=e.pageX,P.startY=e.pageY,P.startMovePosition=parseFloat(a.data("move-len"),10),I=t.touches.length>=2?!1:!0;break;case"touchmove":var e=t.touches[0];if(P.moveX=P.moveX=e.pageX,P.moveY=P.moveY=e.pageY,1===t.touches.length&&I&&!M){var i=P.moveX-P.startX,s=P.startMovePosition+i;a.css({"-webkit-transform":"translate3d("+s+"px,0,0)",transform:"translate3d("+s+"px,0,0)"}),L=s}break;case"touchend":case"touchcancel":if(0!==t.touches.length)return;if(Y||!I||M)return;var n=(new Date).getTime(),o=parseInt(a.data("active"),10);if(n-P.startTime<250){var l=P.moveX?P.moveX-P.startX:0,c=P.moveY?P.moveY-P.startY:0;if(Math.abs(l)>90&&Math.abs(l/c)>=1.5&&Math.abs(c)<220)r.call(this,!(l>0));else if(I&&r.call(this,o),Math.abs(l)<30&&Math.abs(c)<30)if("img"!==t.target.tagName.toLocaleLowerCase()){var h=d.data("maskFn");h&&h()}else{var f=d.data("imgTapFn");f&&f()}}else if(I){var p=P.moveX-P.startX;halfWidth=k/3,Math.abs(p)>halfWidth&&(0>p?o++:o--),r.call(this,parseInt(o,10),!1)}P.moveX=0,P.moveY=0}}function r(t,a){if(!D){var e=$(this),i=parseInt(e.data("active"),10),n=i,o=parseInt(e.data("lengths"),10),r=i;if(t===!0)i++;else if(t===!1)i--;else{if("number"!=typeof t)return;i=t}i=1>i?1:i,i=i>o?o:i;var l=$("li",e).eq(r-1),c=$("li",e).eq(i-1),h=(i-1)*k;D=!0,L=-h,e.data("move-len",-h).animate({transform:"translate3d(-"+h+"px,0,0)","-webkit-transform":"translate3d(-"+h+"px,0,0)"},200,function(){if(D=!1,n!=i){$("span",l).css({transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)"}).data("skewingx",0).data("skewingy",0),$("img",l).css({transform:"scale(1)","-webkit-transform":"scale(1)"}).data("scale",1);var t=$("img",c);$(".view-title p",d).html(t.attr("title")),x.slideFn&&x.slideFn(i,n,t),s(c)}}).data("active",i),$("i",d.children("span")).html(i)}}function l(t){P.startX=t.touches[0].pageX,P.startY=t.touches[0].pageY}function c(t,a,e,i){var s=k-a.width,n=u-a.height,o=e.data("skewingx"),r=e.data("skewingy"),l=o,c=r;s>0?l=0:a.left>0?l=o-a.left:a.left<0&&s-a.left>0&&(l=o+(s-a.left)),n>0?c=0:a.top>0?c-=a.top:a.top<0&&n-a.top>0&&(c=o+(n-a.top)),h(e,l,c)}function h(t,a,e){t.css({transform:"translate3d("+a+"px,"+e+"px,0)","-webkit-transform":"translate3d("+a+"px,"+e+"px,0)"}).data("skewingx",a).data("skewingy",e)}function f(t){switch(t.type){case"touchstart":var a=t.touches;2===a.length&&$(a[0].target).closest("li")[0]===$(a[1].target).closest("li")[0]?(X=!0,q=a,m=p(a)):(X=!1,T={x:a[0].pageX,y:a[0].pageY});break;case"touchmove":var e=t.touches;if(L%k!==0)return;var i=$("img",this),s=$("span",this),n=s.offset(),o=i.offset();if(o.left=o.left-v.left,o.top=o.top-v.top,n.left=n.left-v.left,n.top=n.top-v.top,X&&m&&2===t.touches.length){t.stopPropagation();var r=p(e),h=i.data("scale");w=r/m*h,1>w&&(w=1),i.css({transform:"scale("+w+")","-webkit-transform":"scale("+w+")"}).data("scale",w),h>w&&c(i,o,s,n),m=r,M=!0,F=!1}else if(1===t.touches.length&&!X&&F&&"img"===t.target.tagName.toLocaleLowerCase()){var f={x:e[0].pageX,y:e[0].pageY},d=parseFloat(i.data("scale"));if(!isNaN(d)&&o.width<=k)return void(Y=!1);var g=s.data("skewingy"),b=s.data("skewingx"),x=parseFloat(b)+(f.x-T.x),y=parseFloat(g)+(f.y-T.y),P=o.width-k;if(f.x>T.x)if(P>=0){if(o.left>=0)return Y=!1,void(b=-Math.abs((o.width-n.width)/2));t.stopPropagation(),l(t),b=x,Y=!0}else{if(Math.abs(o.left)>=Math.abs(P))return Y=!1,t.stopPropagation(),void l(t);t.stopPropagation(),l(t),b=x,Y=!0}else if(0>P){if(o.left<=0)return void(Y=!1);b=x,Y=!1}else{if(Math.abs(o.left)>=Math.abs(P))return void(Y=!1);t.stopPropagation(),l(t),b=x,Y=!0}var D=o.height-u;f.y>T.y?D>=0&&o.top<=0&&o.top<=0&&(g=y):D>=0&&Math.abs(o.top)<Math.abs(D)&&(g=y),s.css({transform:"translate3d("+b+"px,"+g+"px,0)","-webkit-transform":"translate3d("+b+"px,"+g+"px,0)"}).data("skewingx",b).data("skewingy",g),T={x:f.x,y:f.y}}t.preventDefault();break;case"touchend":case"touchcancel":0===t.touches.length&&(F=!0,setTimeout(function(){M=!1},50)),2===t.touches.length?setTimeout(function(){X=!0},300):X=!1}}function p(t){var a=t[0],e=t[1],i=Math.abs(a.pageX-e.pageX),s=Math.abs(a.pageY-e.pageY);return Math.sqrt(i*i+s*s)}var d,u,v,g,m,w,b=window,x={init:function(t){return t.container?(this.container(t.container),d[0]||(d=$('<div class="ui-img-preview"></div>').appendTo(y)),t.data&&this.setData(t.data,t.index),v=d.offset(),k=v.width,u=v.height,$(b).off("resize orientationchange",i).on("resize orientationchange",i),d.data("maskFn",t.maskFn),d.data("imgTapFn",t.imgTapFn),this):void 0},webp:!0,container:function(t){y=$(t),d=$(".ui-img-preview",y)},setData:function(t,a){t&&t[0]&&(this.data=t,n(t,a))},show:function(t,a,e){if(t||this.data||d[0]){var i,s;"number"==typeof t?i=t:"number"==typeof a&&(i=a),"object"==typeof t?this.setData(t,i):"function"==typeof t&&(s=t),"function"==typeof a&&(s=a),s=s||e,s?s(d):d.css({opacity:0,display:"block"}).animate({opacity:1},300)}},close:function(t){return t?void t(d):(d.css({opacity:1,display:"block"}).animate({opacity:0},300,function(){$(this).css({display:"none"})}),X=!1,M=!1,F=!0,Y=!1,T={},P={},D=!1,I=!1,q=[],void 0)},setIndex:function(t){var a=$("ul",d),e=(t-1)*k,i=a.data("active");if(a.data("active")!==t){a.css({"-webkit-transform":"translate3d(-"+e+"px,0,0)",transform:"translate3d(-"+e+"px,0,0)"}).data("active",t);var n=$("li",a).eq(t-1),o=$("img",n);$(".view-title p",d).html(o.attr("title")),$("i",d.children("span")).html(t),x.slideFn&&x.slideFn(t,i,o),s(n)}},slideFn:function(t,a,e){},resize:function(){i()}},y=$("body"),k=y.width(),X=!1,M=!1,F=!0,Y=!1,T={},P={},D=!1,I=!1,q=[],L=0;e.exports=x,$.imgPreview=x});