define("imgpreviewJs",function(t,a,e){function s(){v=d.offset(),k=v.width,u=v.height,clearTimeout(g),g=setTimeout(function(){var t=$("ul",d),a=parseInt(t.data("active"),10);r.call(t,a)},200)}function i(t){var a=$("img",t),e=[a];e.push($("img",t.prev("li"))),e.push($("img",t.next("li"))),e.forEach(function(t){t[0]&&(t[0].src=t.data("src"))})}function o(t,a){a=a&&a>=1?a:1;for(var e=-(a-1)*k,s="<span><i>"+a+"</i>/"+t.length+'</span><ul style="transform: translate3d('+e+'px, 0px, 0px);" data-move-len="'+e+'" data-active="'+a+'"  data-last-active="'+a+'" data-lengths="'+t.length+'">',o=0;o<t.length;o++){var r=t[o],c=r.url||r,l=r.title;s+='<li class="list-loading"><span data-skewingx="0" data-skewingy="0"><img style="height:'+360/(640/k)+'px;" data-scale="1" data-src="'+c+'" title="'+l+'"/></span></li>'}s+='</ul><div class="view-title"><p>'+(t[a-1].title||"")+"</p></div>",s=$(s);var h=$("li",s).off("touchstart touchmove touchend touchcancel",f);$("ul",d).off("touchstart touchmove touchend touchcancel",n),x.webp&&b.loadWebp&&b.loadWebp({attr:"data-src",img:$("img",h)}),d.html(s),$("img",s).on("load",function(){this.style.height="auto",$(this).parents("li").removeClass("list-loading")}),i(h.eq(a-1)),$("li",s).on("touchstart touchmove touchend touchcancel",f),$("ul",d).on("touchstart touchmove touchend touchcancel",n)}function n(t){t.preventDefault(),t.stopPropagation();var a=$(this);switch(t.type){case"touchstart":if(t.touches.length>1)return;T.startTime=(new Date).getTime();var e=t.touches[0];T.startX=e.pageX,T.startY=e.pageY,T.startMovePosition=parseFloat(a.data("move-len"),10),I=t.touches.length>=2?!1:!0;break;case"touchmove":var e=t.touches[0];if(T.moveX=T.moveX=e.pageX,T.moveY=T.moveY=e.pageY,1===t.touches.length&&I&&!M){var s=T.moveX-T.startX,i=T.startMovePosition+s;a.css({"-webkit-transform":"translate3d("+i+"px,0,0)",transform:"translate3d("+i+"px,0,0)"}),L=i}break;case"touchend":case"touchcancel":if(0!==t.touches.length)return;if(F||!I||M)return;var o=(new Date).getTime(),n=parseInt(a.data("active"),10);if(o-T.startTime<250){var c=T.moveX?T.moveX-T.startX:0,l=T.moveY?T.moveY-T.startY:0;if(Math.abs(c)>90&&Math.abs(c/l)>=1.5&&Math.abs(l)<220)r.call(this,!(c>0));else if(I&&r.call(this,n),Math.abs(c)<30&&Math.abs(l)<30&&"img"!==t.target.tagName.toLocaleLowerCase()){var h=d.data("maskFn");h&&h()}}else if(I){var f=T.moveX-T.startX;halfWidth=k/3,Math.abs(f)>halfWidth&&(0>f?n++:n--),r.call(this,parseInt(n,10),!1)}T.moveX=0,T.moveY=0}}function r(t,a){if(!D){var e=$(this),s=parseInt(e.data("active"),10),o=s,n=parseInt(e.data("lengths"),10),r=s;if(t===!0)s++;else if(t===!1)s--;else{if("number"!=typeof t)return;s=t}s=1>s?1:s,s=s>n?n:s;var c=$("li",e).eq(r-1),l=$("li",e).eq(s-1),h=(s-1)*k;D=!0,L=-h,e.data("move-len",-h).animate({transform:"translate3d(-"+h+"px,0,0)","-webkit-transform":"translate3d(-"+h+"px,0,0)"},200,function(){if(D=!1,o!=s){$("span",c).css({transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)"}).data("skewingx",0).data("skewingy",0),$("img",c).css({transform:"scale(1)","-webkit-transform":"scale(1)"}).data("scale",1);var t=$("img",l);$(".view-title p",d).html(t.attr("title")),x.slideFn&&x.slideFn(s,o,t),i(l)}}).data("active",s),$("i",d.children("span")).html(s)}}function c(t){T.startX=t.touches[0].pageX,T.startY=t.touches[0].pageY}function l(t,a,e,s){var i=k-a.width,o=u-a.height,n=e.data("skewingx"),r=e.data("skewingy"),c=n,l=r;i>0?c=0:a.left>0?c=n-a.left:a.left<0&&i-a.left>0&&(c=n+(i-a.left)),o>0?l=0:a.top>0?l-=a.top:a.top<0&&o-a.top>0&&(l=n+(o-a.top)),h(e,c,l)}function h(t,a,e){t.css({transform:"translate3d("+a+"px,"+e+"px,0)","-webkit-transform":"translate3d("+a+"px,"+e+"px,0)"}).data("skewingx",a).data("skewingy",e)}function f(t){switch(t.type){case"touchstart":var a=t.touches;2===a.length&&$(a[0].target).closest("li")[0]===$(a[1].target).closest("li")[0]?(X=!0,q=a,m=p(a)):(X=!1,P={x:a[0].pageX,y:a[0].pageY});break;case"touchmove":var e=t.touches;if(L%k!==0)return;var s=$("img",this),i=$("span",this),o=i.offset(),n=s.offset();if(n.left=n.left-v.left,n.top=n.top-v.top,o.left=o.left-v.left,o.top=o.top-v.top,X&&m&&2===t.touches.length){t.stopPropagation();var r=p(e),h=s.data("scale");w=r/m*h,1>w&&(w=1),s.css({transform:"scale("+w+")","-webkit-transform":"scale("+w+")"}).data("scale",w),h>w&&l(s,n,i,o),m=r,M=!0,Y=!1}else if(1===t.touches.length&&!X&&Y&&"img"===t.target.tagName.toLocaleLowerCase()){var f={x:e[0].pageX,y:e[0].pageY},d=parseFloat(s.data("scale"));if(!isNaN(d)&&n.width<=k)return void(F=!1);var g=i.data("skewingy"),b=i.data("skewingx"),x=parseFloat(b)+(f.x-P.x),y=parseFloat(g)+(f.y-P.y),T=n.width-k;if(f.x>P.x)if(T>=0){if(n.left>=0)return F=!1,void(b=-Math.abs((n.width-o.width)/2));t.stopPropagation(),c(t),b=x,F=!0}else{if(Math.abs(n.left)>=Math.abs(T))return F=!1,t.stopPropagation(),void c(t);t.stopPropagation(),c(t),b=x,F=!0}else if(0>T){if(n.left<=0)return void(F=!1);b=x,F=!1}else{if(Math.abs(n.left)>=Math.abs(T))return void(F=!1);t.stopPropagation(),c(t),b=x,F=!0}var D=n.height-u;f.y>P.y?D>=0&&n.top<=0&&n.top<=0&&(g=y):D>=0&&Math.abs(n.top)<Math.abs(D)&&(g=y),i.css({transform:"translate3d("+b+"px,"+g+"px,0)","-webkit-transform":"translate3d("+b+"px,"+g+"px,0)"}).data("skewingx",b).data("skewingy",g),P={x:f.x,y:f.y}}t.preventDefault();break;case"touchend":case"touchcancel":0===t.touches.length&&(Y=!0,setTimeout(function(){M=!1},50)),2===t.touches.length?setTimeout(function(){X=!0},300):X=!1}}function p(t){var a=t[0],e=t[1],s=Math.abs(a.pageX-e.pageX),i=Math.abs(a.pageY-e.pageY);return Math.sqrt(s*s+i*i)}var d,u,v,g,m,w,b=window,x={init:function(t){return t.container?(this.container(t.container),d[0]||(d=$('<div class="ui-img-preview"></div>').appendTo(y)),t.data&&this.setData(t.data,t.index),v=d.offset(),k=v.width,u=v.height,$(b).off("resize orientationchange",s).on("resize orientationchange",s),d.data("maskFn",t.maskFn),this):void 0},webp:!0,container:function(t){y=$(t),d=$(".ui-img-preview",y)},setData:function(t,a){t&&t[0]&&(this.data=t,o(t,a))},show:function(t,a,e){if(t||this.data||d[0]){var s,i;"number"==typeof t?s=t:"number"==typeof a&&(s=a),"object"==typeof t?this.setData(t,s):"function"==typeof t&&(i=t),"function"==typeof a&&(i=a),i=i||e,i?i(d):d.css({opacity:0,display:"block"}).animate({opacity:1},300)}},close:function(t){return t?void t(d):(d.css({opacity:1,display:"block"}).animate({opacity:0},300,function(){$(this).css({display:"none"})}),X=!1,M=!1,Y=!0,F=!1,P={},T={},D=!1,I=!1,q=[],void 0)},setIndex:function(t){var a=$("ul",d),e=(t-1)*k,s=a.data("active");if(a.data("active")!==t){a.css({"-webkit-transform":"translate3d(-"+e+"px,0,0)",transform:"translate3d(-"+e+"px,0,0)"}).data("active",t);var o=$("li",a).eq(t-1),n=$("img",o);$(".view-title p",d).html(n.attr("title")),$("i",d.children("span")).html(t),x.slideFn&&x.slideFn(t,s,n),i(o)}},slideFn:function(t,a,e){},resize:function(){s()}},y=$("body"),k=y.width(),X=!1,M=!1,Y=!0,F=!1,P={},T={},D=!1,I=!1,q=[],L=0;e.exports=x,$.imgPreview=x});