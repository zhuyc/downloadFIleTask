define("dataservice",function(t,e,i){function n(t){return"[object Object]"=={}.toString.call(t)}function a(t){if(!n(t))return!0;for(var e in t)if({}.hasOwnProperty.call(t,e))return!1;return!0}function o(t,e){return this instanceof o?(this.elem=$(t),void this.init(e)):new o(t,e)}function r(){var t=this;$(t.scrollElem).off().on("scroll",function(e){var i=$(this),n=t.isWindowScroll?$(document):$(t.contentElem);!t.stopped&&!t.isLoading&&!t.isLoaded&&i.scrollTop()+t.bottom>=n.height()-i.height()-1&&(l.call(t),t.loadData())})}function c(){this.elem.append('<div class="data-loader">'+this.clickMsg+"</div>");var t=this;$(".data-loader",t.elem).on("click",function(){t.isLoading||t.isLoaded||(l.call(t),t.loadData())})}function l(){var t=$(".data-loader",this.elem),e="<span>"+this.loadingMsg+"</span>";t.length?t.html(e):(this.elem.append('<div class="data-loader">'+e+"</div>"),t=$(".data-loader",this.elem)),$(window).scrollTop($(window).scrollTop()+t.height())}!function(){var t=".data-loader{height:50px;line-height:50px;text-align:center;background-image:-webkit-linear-gradient(top,transparent 50%,#dcdcdc 50%);background-image:linear-gradient(to top,transparent 50%,#dcdcdc 50%);background-size:100% 1px;background-repeat:no-repeat;background-position:top}.data-loader span{padding:15px 0 15px 50px;background:url(http://img1.40017.cn/touch/hb/c/2/img/icon_tg_loading1.gif) no-repeat left center;background-size:35px 35px}",e=document.createElement("style");e.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(e)}(),o.prototype={constructor:o,init:function(t){this.check(t.config),$.extend(this,{initLoad:!1,method:"scroll",scrollElem:$(window),bottom:0,initMsg:"上拉加载更多数据",loadingMsg:"正在加载中",finishMsg:"没有更多内容了哦",clickMsg:"点击加载更多数据",errorMsg:"出错了，请重试"},t),this.isWindowScroll=this.scrollElem[0]===window,this.initLoad&&this.loadData(),this.bindEvents()},bindEvents:function(){"scroll"===this.method?r.call(this):"click"===this.method&&c.call(this)},check:function(t){if(!n(t))throw new Error("the config must be an object！");if(a(t))throw new Error("the config cant be an empty object！");if(!t.name)throw new Error("the serviceName is required！");if(!t.url)throw new Error("the url is required！");if(!t.interfaceid)throw new Error("the interfaceid is required！")},loadData:function(){var t=this;t.isLoading=!0;var e={param:{tagname:t.config.tag||"",servicename:t.config.name,interfaceid:t.config.interfaceid,requrl:t.config.url,reqbody:t.data||"",iscache:t.config.cache||0},callback:function(e){t.isLoading=!1;var i,n=$(".data-loader",t.elem);if((!t.config.callback||(i=t.config.callback(e,t)))&&(t.contentElem?$(t.contentElem,t.elem).append(i||e):n.length?n.before(i||e):t.elem.append(i||e)),t.isLoaded){if(t.hideFinishMsg&&n.length)return void n.css({display:"none"});n.length?n.html(t.finishMsg):t.initLoad&&t.elem.append('<div class="data-loader">'+t.finishMsg+"</div>")}else{if(!n.length)return;n.css({display:"block"}),"scroll"===t.method?n.html(t.initMsg):"click"===t.method&&n.html(t.clickMsg)}}};t.config.ajaxObj&&(e.ajaxObj=t.config.ajaxObj),window._tc_bridge_util.get_data(e)},stop:function(){this.stopped=!0},start:function(){this.stopped=!1}},$.fn.dataService=function(t){for(var e=[],i=0,n=this.length;n>i;i++)e.push(new o(this[i],t));return 1===e.length?e[0]:e.length>1?e:void 0}});