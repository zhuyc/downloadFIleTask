!function(e){function r(e){return this instanceof r?(this.arrShow=e,this.currentUrl=t,r.setRouterArr=[],r.routerTopArr=[],void this.init()):new r(e)}var t=document.location.hash.replace(/#/,"").split("?")[0];r.appendRouter=function(e,r){var t=document.location.hash.replace(/#/,""),o={from:t,to:e};"[object Function]"=={}.toString.call(r)&&r(JSON.stringify(o));var n,c=document.createElement("div");n=e.replace(/\//g,"")+"Page",e&&$("#"+n)[0]||(c.setAttribute("id",n),$("html-view").append(c))},r.open=function(e){window.location.href=window.location.href.split("#")[0]+"#/"+e,r.defineRouteId=e.replace(/\//,"")+"Page"},r.close=function(){window.history.back()},r.otherwise=function(e){this.defaultRouter=e||""},r.prototype={constructor:r,init:function(e,t,o){function n(e){var t,o,n=$(window).scrollTop(),l=!1;t=e.newURL.replace(/.*#/,"").split("?")[0],o=e.oldURL.replace(/.*#/,"").split("?")[0],c.isStorageRecord(t.replace(/\//,""));var i=r.setRouterArr.indexOf(t.replace(/\//,"")),a=r.setRouterArr.indexOf(o.replace(/\//,""));i>a?(r.routerTopArr.forEach(function(e,r,t){e.ctrl==o&&(l=!0,e.scrollTH!=n&&(e.scrollTH=n))}),c.setRouterTopArr(o,n,l)):(r.routerTopArr.forEach(function(e,r,t){e.ctrl==o&&(l=!0)}),c.setRouterTopArr(o,0,l)),c.init(t,i,a)}var c=this,l=!1;c.ctrlName=e||c.currentUrl,c.launchRouter(c.ctrlName),c.isStorageRecord(c.ctrlName.replace(/\//,"")),r.defineRouteId=c.ctrlName.replace(/\//,"")+"Page",o>t?c.setScrollTop(e):window.scroll(0,0),c.isMatchRoute(function(e,t){if("true"==e||1==e){$("html-view").children("div").length>0&&c.isExistRouter()&&($("#"+c.ctrlName.replace(/\//,"")+"Page").css("display","block"),l=!0),c.controller(t.controller,l,function(e){seajs.use([t.controller],function(r){r.callback&&r.callback(e),r.controller&&r.controller(e)})})}else{if(""!=c.ctrlName&&c.ctrlName!=r.defaultRouter&&r.defaultRouter&&!$("#"+c.ctrlName.replace(/\//,"")+"Page")[0])return void(window.location.href=window.location.href.split("#")[0]+"#"+r.defaultRouter);var o;$("html-view").children().css("display","none"),o=c.ctrlName.replace(/\//g,"")+"Page",$("#"+o).css("display","block")}}),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7)&&(window.onhashchange=n)},launchRouter:function(e){""==e&&r.defaultRouter&&(window.location.href=window.location.href.split("#")[0]+"#"+r.defaultRouter)},isExistRouter:function(){var e=!1,r=this;return $("html-view").children("div").forEach(function(t,o,n){$(t).css("display","none"),$(t).attr("id").replace("Page","")==r.ctrlName.replace(/\//,"")&&(e=!0)}),e},isStorageRecord:function(e){var t=!1;r.setRouterArr.length>0&&r.setRouterArr.forEach(function(r,o,n){r==e&&(t=!0)}),t||r.setRouterArr.push(e)},isMatchRoute:function(e){var r,t=this,o=!1;t.arrShow.forEach(function(e,n,c){e.url.split("?")[0]==t.ctrlName&&(o=!0,r=e)}),e(o,r)},controller:function(e,r,t){var o,n=this;n.arrShow.forEach(function(e,r,t){e.url.split("?")[0]==n.ctrlName&&(o=e)}),e==o.controller&&(r?t(o):$.ajax({url:o.templateUrl,type:"get",dataType:"html",data:"",error:function(){console.log("Error loading document")},success:function(e){var r,c=document.createElement("div");r=n.ctrlName.replace(/\//g,"")+"Page",c.setAttribute("id",r),$(c).append(e),$("html-view").append(c),setTimeout(function(){t(o)},100)}}))},getCurrentHash:function(){var e=document.location.hash.replace(/#/,"");return e},setScrollTop:function(e){r.routerTopArr.length>0&&r.routerTopArr.forEach(function(r,t,o){r.ctrl==e&&$(window).scrollTop(r.scrollTH)})},setRouterTopArr:function(e,t,o){if(!o){var n={ctrl:e||"",scrollTH:t};e&&r.routerTopArr.push(n)}}},e.router=r}("object"==typeof exports?exports:window);