define("webp",function(e,t){function n(e){if(l===!1&&!e.replace)return void(e.fn&&e.fn());var t=$.extend({},e),n=Object.prototype.toString.call(t.img);"[object Array]"!==n&&"[object Object]"!==n&&(t.img=document.getElementsByTagName("img")),p.push(t),o()}function o(){if(null!==l)for(;p.length;){var e=p[0];l===!0||e.replace?r(e):e.fn&&e.fn(),p.shift()}}function r(e){for(var t=e.attr,n=e.replace,o=0;o<e.img.length;o++){var r=e.img[o],i=r.getAttribute(t);if(i){var a=c(i);n?r.src=a:r.setAttribute(t,a)}}e.fn&&e.fn()}function i(e){if(!f){f=!0;var t=new Image;t.onload=t.onerror=function(){var n=0;2==t.height&&(n=1),e&&e(n)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}}function c(e){var t=e.split("?"),n=t[0],o=n.length,r=n.substring(o-4,o);return-1===n.indexOf("pic3.40017.cn")&&-1===n.indexOf("pic4.40017.cn")||!l||"webp"===r||".gif"===r?l||"webp"!==r?t=e:(t[0]=n.replace(/.webp/g,""),t=t.length>1?t.join("?"):t[0]):(t[0]=t[0]+".webp",t=t.length>1?t.join("?"):t[0]),t}var a={get:function(e){if(!e)return"";var t="";try{t=localStorage.getItem(e),null===t&&(t=$.cookie(e))}catch(n){t=$.cookie(e)}return t=t||"",decodeURIComponent(t)},set:function(e,t){if(e&&(t||0===t))try{localStorage.setItem(e,encodeURIComponent(t))}catch(n){$.cookie(e,t,{path:"/",expires:30})}},remove:function(e){try{localStorage.removeItem(e)}catch(t){$.removeCookie(e,{path:"/"})}}},f=!1,l=null,p=[],g=a.get("isSupportWebp");"1"===g?l=!0:"0"===g?l=!1:i(function(e){l=e?!0:!1,o(),a.set("isSupportWebp",e)}),t.loadWebp=$.loadWebp=n,$.template&&$.template.helper("webp",function(e){return c(e)})});