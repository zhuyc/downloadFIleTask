define("dataservice",function(e,i,t){function n(e){return"[object Object]"=={}.toString.call(e)}function a(e){if(!n(e))return!0;for(var i in e)if({}.hasOwnProperty.call(e,i))return!1;return!0}function o(e,i){return this instanceof o?(this.elem=$(e),void this.init(i)):new o(e,i)}function r(){this.elem.append('<div class="data-loader">'+this.clickMsg+"</div>");var e=this;$(".data-loader",e.elem).on("click",function(){e.isLoading||e.isLoaded||(e.showLoading(),e.loadData())})}!function(){var e=".data-loader{height:50px;line-height:50px;text-align:center;background-image:-webkit-linear-gradient(top,transparent 50%,#dcdcdc 50%);background-image:linear-gradient(to top,transparent 50%,#dcdcdc 50%);background-size:100% 1px;background-repeat:no-repeat;background-position:top}.data-loader span{padding:15px 0 15px 50px;background:url(http://img1.40017.cn/touch/hb/c/2/img/icon_tg_loading1.gif) no-repeat left center;background-size:35px 35px}",i=document.createElement("style");i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i)}(),o.prototype={constructor:o,init:function(e){this.check(e.config),$.extend(this,{initLoad:!1,method:"scroll",scrollElem:$(window),bottom:0,initMsg:"上拉加载更多数据",loadingMsg:"正在加载中",finishMsg:"没有更多内容了哦",clickMsg:"点击加载更多数据",errorMsg:"出错了，请重试"},e),this.initLoad&&this.loadData(),this.bindEvents()},bindEvents:function(){"click"===this.method&&r.call(this)},check:function(e){if(!n(e))throw new Error("the config must be an object！");if(a(e))throw new Error("the config cant be an empty object！");if(!e.name)throw new Error("the serviceName is required！");if(!e.url)throw new Error("the url is required！");if(!e.interfaceid)throw new Error("the interfaceid is required！")},loadData:function(){var e=this;e.isLoading=!0;var i={param:{tagname:e.config.tag||"",servicename:e.config.name,interfaceid:e.config.interfaceid,requrl:e.config.url,reqbody:e.data||"",iscache:e.config.cache||0},callback:function(i){e.isLoading=!1;var t,n=$(".data-loader",e.elem);if((!e.config.callback||(t=e.config.callback(i,e)))&&(e.contentElem?$(e.contentElem,e.elem).append(t||i):n.length?n.before(t||i):e.elem.append(t||i)),e.isLoaded){if(e.hideFinishMsg&&n.length)return void n.css({display:"none"});n.length?n.html(e.finishMsg):e.initLoad&&e.elem.append('<div class="data-loader">'+e.finishMsg+"</div>")}else{if(!n.length)return;n.css({display:"block"}),"scroll"===e.method?n.html(e.initMsg):"click"===e.method&&n.html(e.clickMsg)}}};e.config.ajaxObj&&(i.ajaxObj=e.config.ajaxObj),window._tc_bridge_util.get_data(i)},stop:function(){this.stopped=!0},start:function(){this.stopped=!1},showLoading:function(){var e=this,i=$(".data-loader",e.elem),t="<span>"+e.loadingMsg+"</span>";i.length?i.html(t):(e.elem.append('<div class="data-loader">'+t+"</div>"),i=$(".data-loader",e.elem)),$(window).scrollTop($(window).scrollTop()+i.height())}},$.fn.dataService=function(e){for(var i=[],t=0,n=this.length;n>t;t++)i.push(new o(this[t],e));return 1===i.length?i[0]:i.length>1?i:void 0}});