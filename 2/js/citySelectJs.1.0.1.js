!function(){function t(t){this.options=this.options||{},$.extend(this.options,n),$.extend(this.options,t),this.init()}function e(t,e){for(var a=e[0][0],n=0;n<e.length;n++)if(e[n][0]==t||e[n][1]==t){a=e[n][0];break}return a}function a(t){for(var e=[[0,"请选择"]],a=0;a<t.length;a++)e.push([t[a].Id,t[a].Name]);return e}var n={title:"选择城市",city:!0,area:!0,btnPosition:"top",itemPrintFn:function(t){return'<span data-id="'+t[0]+'">'+t[1]+"</span>"}},i=("https:"===location.protocol?"https:":"http:")+"//m.ly.com/member/ajax/GetNationalPlace";t.prototype.init=function(){var t=this,e=t.options;e.city===!1?e.className="city-select-pro":0==e.area&&(e.className="city-select-city"),t.options.changeFn=function(a,n,i){var o=(a[0],parseInt($(a[1]).attr("data-id"),10));"city"==a[0]&&(t.selectCity[1]=o),"pro"==a[0]&&(t.selectCity[0]=o),"area"==a[0]&&(t.selectCity[2]=o),"pro"==a[0]?e.city&&(t.loadCity("1",t.selectCity[0],function(e){t.selectObj.updateSelect({name:"city",data:e,index:0}),n&&n(e)}),e.area&&!a[2]&&(t.selectObj.updateSelect({name:"area",data:[[0,"请选择"]],index:0}),i&&i(data))):"city"==a[0]&&e.area&&t.loadCity("2",t.selectCity[1],function(e){t.selectObj.updateSelect({name:"area",data:e,index:0}),i&&i(e)})};var a=t.options.selectFn||function(){};t.options.selectFn=function(t){for(var e=[],n=0;n<t.length;n++){var i=$("span",t[n][1]);e.push([parseInt(i.attr("data-id"),10),i.html()])}return a(e)},t.selectCity=[],t.createCityArr(function(){t.selectObj=$.Select(t.options),t.selectCity=e.normal})},t.prototype.title=function(t){return this.selectObj.title(t)},t.prototype.createCityArr=function(t){var a=this,n=a.options;a.options.data=[],n.normal=n.normal||[0],n.normal[0]=e(n.normal[0],$.citySelectData.provinceData),a.options.data.push({name:"pro",data:$.citySelectData.provinceData,index:n.normal[0]}),n.normal?0===n.normal[0]?(n.city&&a.options.data.push({name:"city",data:[[0,"请选择"]],index:0}),n.area&&n.city&&a.options.data.push({name:"area",data:[[0,"请选择"]],index:0}),t()):a.loadCity("1",n.normal[0],function(i){n.normal[1]=n.normal[1]||0,n.normal[1]=e(n.normal[1],i),a.options.data.push({name:"city",data:i,index:n.normal[1]}),n.area&&n.city&&(0!=n.normal[1]?a.loadCity("2",n.normal[1],function(i){n.normal[2]=n.normal[2]||0,n.normal[2]=e(n.normal[2],i),a.options.data.push({name:"area",data:i,index:n.normal[2]}),t()}):(a.options.data.push({name:"area",data:[[0,"请选择"]],index:0}),t()))}):(n.city&&(a.options.data.push({name:"city",data:[[0,"请选择"]],index:0}),n.normal.push(0)),n.area&&n.city&&(a.options.data.push({name:"pro",data:[[0,"请选择"]],index:0}),n.normal.push(0)),t())},t.prototype.loadCity=function(t,e,n){function o(i){if(i&&i.ReturnValue&&i.ReturnValue.length){var o=a(i.ReturnValue);"1"===t?($.citySelectData.cityData.push({id:e,data:o}),s.selectCity[0]&&s.selectCity[0]==e&&n(o)):($.citySelectData.areaData.push({id:e,data:o}),s.selectCity[1]&&s.selectCity[1]==e&&n(o))}}var c,r,s=this,l=(s.options,"GetCity");if(0==e&&n([[0,"请选择"]]),t&&e){"1"===t?c=$.citySelectData.cityData:(c=$.citySelectData.areaData,l="GetDivision");for(var p=0;p<c.length;p++)if(c[p].id==e){r=c[p];break}return r?void n(r.data):void $.ajax({url:i,data:"type="+l+"&pid="+e,dataType:"jsonp",success:function(t){o(t)},error:function(){o({ReturnValue:[]})}})}},t.prototype.open=function(t){var e=this,a=e.options;t?($.extend(a,t),e.createCityArr(function(){e.options.data.forEach(function(t){e.selectObj.updateSelect(t)}),this.selectObj.open()})):this.selectObj.open()},t.prototype.setNormal=function(t,e){var a=["pro","city","area"],n=this;t[0]?(n.selectObj.updateIndex(a[0],t[0]),n.options.changeFn([a[0],$('.select2-ul li[data-id="'+t[0]+'"]',n.selectObj._options._wrap),!0],function(){t[1]?(n.selectObj.updateIndex(a[1],t[1]),n.options.changeFn(["city",$('.select2-ul li[data-id="'+t[1]+'"]',n.selectObj._options._wrap),!0],!1,function(){t[2]?(n.options.changeFn(["area",$('.select2-ul li[data-id="'+t[2]+'"]',n.selectObj._options._wrap)]),ff.selectObj.updateIndex(a[2],t[2])):e()})):e()})):e()},t.prototype.close=function(t){this.selectObj.close()},t.prototype.destroy=function(){me.selectObj.destroy(),me.selectObj=null},$.citySelect=function(e){return new t(e)},$.citySelectData=$.citySelectData||{},$.citySelectData.provinceData=$.citySelectData.provinceData||[[0,"请选择省"],[2,"安徽"],[3,"北京"],[4,"福建"],[5,"甘肃"],[6,"广东"],[7,"广西"],[8,"贵州"],[9,"海南"],[10,"河北"],[11,"河南"],[12,"黑龙江"],[13,"湖北"],[14,"湖南"],[15,"吉林"],[16,"江苏"],[17,"江西"],[18,"辽宁"],[19,"内蒙古"],[20,"宁夏"],[21,"青海"],[22,"山东"],[23,"山西"],[24,"陕西"],[25,"上海"],[26,"四川"],[27,"天津"],[28,"西藏"],[29,"新疆"],[30,"云南"],[31,"浙江"],[32,"重庆"],[33,"香港"],[34,"澳门"],[35,"台湾"]],$.citySelectData.cityData=$.citySelectData.cityData||[],$.citySelectData.areaData=$.citySelectData.areaData||[]}(),"function"==typeof define&&define("citySelectJs",["selectJs","selectCss"],function(t,e,a){t("selectJs"),t("selectCss"),e.citySelect=$.citySelect});